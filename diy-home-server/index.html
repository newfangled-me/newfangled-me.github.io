<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Repurpose an Old Computer into a DIY Complete Home Server for Free &#8211; Newfangled Me</title>
<meta name="description" content="The incoherent musings of Alex Forey">
<meta name="keywords" content="diy, home, server">
<!-- Twitter Card and Open Graph tags -->
<meta name="twitter:title" content="Repurpose an Old Computer into a DIY Complete Home Server for Free &#8211; Newfangled Me">
<meta name="twitter:description" content="The incoherent musings of Alex Forey">
<meta name="twitter:creator" content="@alexforey">
<meta name="twitter:card" content="summary">
<meta name="twitter:image:src" content="http://newfangled.me/images/site-logo.png">
<meta property="og:type" content="article">
<meta property="og:title" content="Repurpose an Old Computer into a DIY Complete Home Server for Free &#8211; Newfangled Me">
<meta property="og:description" content="The incoherent musings of Alex Forey">
<meta property="og:url" content="http://newfangled.me/diy-home-server">
<meta property="og:site_name" content="Newfangled Me">

<!-- Webmaster Tools verfication -->




<link rel="canonical" href="http://newfangled.me/diy-home-server">
<link href="http://newfangled.me/feed.xml" type="application/atom+xml" rel="alternate" title="Newfangled Me Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://newfangled.me/assets/css/main.css">
<!-- Animations -->
<link rel="stylesheet" href="http://newfangled.me/assets/css/animate.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- Load Modernizr -->
<script src="http://newfangled.me/assets/js/vendor/modernizr-2.6.2.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://newfangled.me/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://newfangled.me/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://newfangled.me/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://newfangled.me/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://newfangled.me/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://newfangled.me/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post" itemscope itemtype="http://schema.org/WebPage">

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->
<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated fadeInDown" itemscope itemtype="http://schema.org/SiteNavigationElement">
	    <ul>
	        
	        <li><a href="http://newfangled.me/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a>
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<header class="masthead">
	<div class="wrap">
		<a href="http://newfangled.me" class="site-logo" rel="home" title="Newfangled Me"><img src="http://newfangled.me/images/site-logo.png" width="200" height="200" class="animated fadeInUp"></a>
		<h1 class="site-title animated fadeIn"><a href="http://newfangled.me">Newfangled Me</a></h1>
		<h2 class="site-description animated fadeIn">The incoherent musings of Alex Forey</h2>
	</div>
</header><!-- /.masthead -->

<div id="main" role="main" itemprop="mainContentOfPage" itemscope itemtype="http://schema.org/Blog">
  <article class="hentry" itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogpost">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"><a href="http://newfangled.me/tags.html#diy" title="Pages tagged diy" rel="tag">diy</a> &bull; <a href="http://newfangled.me/tags.html#home" title="Pages tagged home" rel="tag">home</a> &bull; <a href="http://newfangled.me/tags.html#server" title="Pages tagged server" rel="tag">server</a></span>
        <h1 class="entry-title" itemprop="headline">Repurpose an Old Computer into a DIY Complete Home Server for Free</h1>
      </header>
      <footer class="entry-meta">
        <img src="http://gravatar.com/avatar/c757293cea100034c52c39bf7603918a?s=150" alt="Alex Forey photo" class="author-photo">
        <span class="author vcard" itemprop="author" itemscope itemtype="http://schema.org/Person">By <span itemprop="name" class="fn"><a href="http://newfangled.me/about" title="About Alex Forey" itemprop="url">Alex Forey</a></span></span>
        <span class="entry-date date published"><time datetime="2012-05-26T13:37:19+01:00" itemprop="datePublished"><i class="icon-calendar-empty"></i> May 26, 2012</time></span>
        
        <span class="entry-comments"><i class="icon-comment-alt"></i> <a href="#disqus_thread">Comment</a></span>
        <span><a href="http://newfangled.me/diy-home-server" rel="bookmark" title="Repurpose an Old Computer into a DIY Complete Home Server for Free"><i class="icon-link"></i> Permalink</a></span>
      </footer>
      <div class="entry-content">
        <p>It&#39;s a while since I&#39;ve had an utter geek-out, and I thought it&#39;s about time for another.</p>

<p>Some of you may know that I&#39;ve had a motherboard <a href="http://instagr.am/p/jJMNd/">hanging on my bedroom wall </a>for a couple of months, but recently I realized this was a big mistake. It was perfectly functional! So I dug around in my wardrobe and eventually found the box that contained the other components from our family&#39;s old, gutted computer.</p>

<p>I roughly re-assembled it, with IDE cables going to 2x DVD Drives and the HDD, as well as supplying power to everything to the PSU.</p>

<p>Hesitantly, I connected the power supply. A message appeared on the screen saying the CPU Fan had failed, and it promptly shut itself down. I spent five or so minutes borrowing looking for the connector for the fan, and eventually found it. I reconnected the PSU and the monitor lit up - it (kinda) worked! It used to be an old Windows XP Box - this is what it looked like at this point:</p>

<p><img src="/images/diy-server-1.jpg "></p>

<p>I also got out the original casing, ripped out the bits I didn&#39;t need, and roughly assembled the guts back into the frame. Then it looked roughly like this (and please don&#39;t yell at me about cable management...)</p>

<p><img src="/images/diy-server-2.jpg "></p>

<p>So I went over to the iMac, burned a disk of Ubuntu 12.04 (not the server version, because I like GUIs and it&#39;s not like the server&#39;s going to have its work cut out), and slammed it into one of the DVD drives. I connected my old crappy PS2 Keyboard and mouse (the ones that don&#39;t need drivers), and moved that drive to first in the boot list in the BIOS.</p>

<p>Old hard drive formatted, and a shiny new install of Ubuntu. Then I went about installing everything I could possibly need to make this into a fully featured home server beast.</p>

<p>First and foremost I installed Apache, PHP, MySQL (pronounced My Squirrel), and PHPMyAdmin by following <a href="http://www.howtoforge.com/ubuntu_lamp_for_newbies">this tutorial</a>. Once I had done this, I performed a chmod to allow me to write to <code>/var/www</code> from other programs, which is the web home directory. There was only one problem - basic modules like cURL, that allow you to make HTTP requests right from your scripts, were not installed. After a bit of Google-ing I found that the terminal command is as simple as <code>sudo apt-get install php5-curl</code>. Ran that and now everything&#39;s going great.</p>

<p>Then I installed proftpd, a great FTP server, and along side that a GUI - the one you get in the Ubuntu Software Centre. I set up two FTP accounts, one to access my web home directory, and another to access my personal account - including my desktop and documents folders.</p>

<p>Then I went about turning it into a mini-NAS server. I connected a few large USB HDDs, and then followed <a href="http://www.7tutorials.com/how-access-ubuntu-shared-folders-windows-7">this tutorial</a> about setting up SMB sharing to Windows and therefore the Mac computers on our network. Everything&#39;s going great.</p>

<p>Another thing - I installed forked-daapd, an iTunes music server, while following <a href="http://www.mrericsir.com/blog/technology/setting-up-ubuntu-as-an-itunes-music-server/">this tutorial</a>, and set its save location to another large USB HDD. Now whenever I open iTunes on any of the computers on my network, that Server shows up and I can drag and drop files into either an iTunes window, or a Finder view of the shared HDD. The clever thing about the second method is that forked-daapd will automatically transcode ogg and flac files into WAVs, which iTunes likes.</p>

<p>The final thing I did, to preparation for installing my server in the basement without a monitor, keyboard or mouse, was to install a remote desktop server for Ubuntu. I decided on xrdp because of the quick install, but I wouldn&#39;t recommend it as development has fallen behind, and so it does not work completely with the Remote Desktop Connection client in Windows 7. The most it can do is open terminal windows by using CTRL+ALT+T. In the near future I intend to replace this by using the default in-built VNC server in Ubuntu and installing TightVNC on Windows, or the equivalent on Mac.</p>

<p>The only problem is that BT does not offer Static IP Addresses. To get round that, I used <a href="http://dnsdynamic.org">DNSDynamic</a>. They provide an easy to use API for updating the IP address that your subdomain points to. And to that effect, I set up a Cron Job (with <code>crontab -e</code> to trigger a PHP script that sends the server&#39;s most recent IP address to DNSDynamic, every day at midnight. The code that goes in that section looks like this: <code>* * * * * /usr/bin/wget -O /dev/null http://localhost/path/to/php.php</code>.</p>

<p>Here&#39;s the code for that PHP file to update the dynamic servers:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">&lt;?php
      $ip = file_get_contents(&quot;http://myip.dnsdynamic.org&quot;);&lt;br&gt;
      $username = &quot;YOUR_USERNAME&quot;;&lt;br&gt;
      $password = &quot;YOUR_PASSWORD&quot;;&lt;br&gt;
      $website = &quot;YOUR_DOMAIN&quot;;&lt;br&gt;

      $request = file_get_contents(&quot;https://&quot;.$username.&quot;:&quot;.$password.&lt;br&gt;
         &quot;@www.dnsdynamic.org/api/?hostname=&quot;.$website.&quot;&amp;myip=&quot;.$ip);&lt;br&gt;
 ?&gt;
</code></pre></div>
<p>Oh, and one last thing. I installed the OpenSSH Server, to allow me to perform command line operations from other computers. This is done simply by running <code>sudo apt-get install openssh-server openssh-client</code>, and you&#39;re ready to go.</p>

<p>The only things left to do were to install it in the basement, providing Internet to it over Ethernet via TP-Link power plugs; and forward ports 80 (for web), 21 (FTP), 22 (SSH) and 3389 (Remote Desktop) to the server from the router and I was done.</p>

<p>The final thing looks like this -</p>

<p><img src="/images/diy-server-3.jpg "></p>

<p>I&#39;m not entirely sure what I&#39;ll end up doing with this machine, but I&#39;m sure it will be awesome.</p>

        <div id="disqus_thread"></div><!-- /#disqus_thread -->
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://newfangled.me/tfl" class="btn" title="Transport for London: Timelapse">Previous article</a>
      
      
        <a href="http://newfangled.me/raspberry-pi" class="btn" title="Making the Raspberry Pi Useful, Internship at Firefly and Big Post-It Notes">Next article</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo">
    <span>&copy; 2013 Alex Forey. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/alexforey" title="Alex Forey on Twitter" target="_blank"><i class="icon-twitter icon-2x"></i></a>
	
	
	
	<a href="http://http://stackexchange.com/users/932591/alfo?tab=accounts" title="Alex Forey on StackExchange" target="_blank"><i class="icon-stackexchange icon-2x"></i></a>
	<a href="http://instagram.com/alexforey" title="Alex Forey on Instagram" target="_blank"><i class="icon-instagram icon-2x"></i></a>
	<a href="http://www.flickr.com/photos/alexforey" title="Alex Forey on Flickr" target="_blank"><i class="icon-flickr icon-2x"></i></a>
	<a href="http://github.com/alfo" title="Alex Forey on Github" target="_blank"><i class="icon-github icon-2x"></i></a>
	
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://newfangled.me/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://newfangled.me/assets/js/main.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'newfangledme'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>	        

</body>
</html>
